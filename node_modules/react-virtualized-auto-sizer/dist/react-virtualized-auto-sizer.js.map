{"version":3,"file":"react-virtualized-auto-sizer.js","sources":["../lib/vendor/detectElementResize.js","../lib/hooks/useSize.ts","../lib/components/AutoSizer.tsx"],"sourcesContent":["/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n * 5) Use 'export' statement over 'module.exports' assignment\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n} else if (typeof self !== \"undefined\") {\n  windowObject = self;\n} else {\n  windowObject = global;\n}\n\nlet cancelFrame = null;\nlet requestFrame = null;\n\nconst TIMEOUT_DURATION = 20;\n\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\n\nconst cancelAnimationFrameFn =\n  windowObject.cancelAnimationFrame ||\n  windowObject.mozCancelAnimationFrame ||\n  windowObject.webkitCancelAnimationFrame;\n\nconst requestAnimationFrameFn =\n  windowObject.requestAnimationFrame ||\n  windowObject.mozRequestAnimationFrame ||\n  windowObject.webkitRequestAnimationFrame;\n\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(\n    callback\n  ) {\n    const animationFrameID = requestAnimationFrameFn(\n      function animationFrameCallback() {\n        clearTimeoutFn(timeoutID);\n        callback();\n      }\n    );\n\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n\n    return [animationFrameID, timeoutID];\n  };\n}\n\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    checkTriggers = function (element) {\n      return (\n        element.offsetWidth !== element.__resizeLast__.width ||\n        element.offsetHeight !== element.__resizeLast__.height\n      );\n    };\n\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (\n        e.target.className &&\n        typeof e.target.className.indexOf === \"function\" &&\n        e.target.className.indexOf(\"contract-trigger\") < 0 &&\n        e.target.className.indexOf(\"expand-trigger\") < 0\n      ) {\n        return;\n      }\n\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(\n            function forEachResizeListener(fn) {\n              fn.call(element, e);\n            }\n          );\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents =\n      \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\n        \" \"\n      );\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    animationName = \"resizeanim\";\n    animationKeyframes =\n      \"@\" +\n      keyframeprefix +\n      \"keyframes \" +\n      animationName +\n      \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css =\n          (animationKeyframes ? animationKeyframes : \"\") +\n          \".resize-triggers { \" +\n          (animationStyle ? animationStyle : \"\") +\n          \"visibility: hidden; opacity: 0; } \" +\n          '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className =\n          \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ =\n            function animationListener(e) {\n              if (e.animationName === animationName) {\n                resetTriggers(element);\n              }\n            };\n          element.__resizeTriggers__.addEventListener(\n            animationStartEvent,\n            element.__resizeTriggers__.__animationListener__\n          );\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(\n        element.__resizeListeners__.indexOf(fn),\n        1\n      );\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(\n            animationStartEvent,\n            element.__resizeTriggers__.__animationListener__\n          );\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(\n            element.__resizeTriggers__\n          );\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener,\n    removeResizeListener\n  };\n}\n\nexport { createDetectElementResize };\n","import { useLayoutEffect, useRef } from \"react\";\nimport type { Size } from \"../types\";\nimport { createDetectElementResize } from \"../vendor/detectElementResize\";\n\nexport function useSize({\n  box,\n  nonce,\n  onResize,\n  rootElement\n}: {\n  box: \"border-box\" | \"content-box\" | \"device-pixel-content-box\";\n  nonce: string | undefined;\n  onResize: (size: Size) => void;\n  rootElement: HTMLElement | null;\n}) {\n  const stableValuesRef = useRef<{\n    onResize: (size: Size) => void;\n    parentNode: HTMLElement | null;\n    prevSize:\n      | Size\n      | {\n          height: undefined;\n          width: undefined;\n        };\n  }>({\n    onResize,\n    parentNode: null,\n    prevSize: {\n      height: undefined,\n      width: undefined\n    }\n  });\n\n  useLayoutEffect(() => {\n    stableValuesRef.current.onResize = onResize;\n  });\n\n  const onResizeStableRef = useRef(() => {\n    const { onResize, parentNode, prevSize } = stableValuesRef.current;\n    if (parentNode === null) {\n      return;\n    }\n\n    let height: number;\n    let width: number;\n\n    switch (box) {\n      case \"border-box\": {\n        const rect = parentNode.getBoundingClientRect();\n\n        height = rect.height;\n        width = rect.width;\n        break;\n      }\n      case \"content-box\": {\n        const rect = parentNode.getBoundingClientRect();\n\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        const style = window.getComputedStyle(parentNode) || {};\n        const borderBottomWidth = parseFloat(style.borderBottomWidth || \"0\");\n        const borderLeftWidth = parseFloat(style.borderLeftWidth || \"0\");\n        const borderRightWidth = parseFloat(style.borderRightWidth || \"0\");\n        const borderTopWidth = parseFloat(style.borderTopWidth || \"0\");\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        const paddingRight = parseFloat(style.paddingRight || \"0\");\n        const paddingTop = parseFloat(style.paddingTop || \"0\");\n        const paddingBottom = parseFloat(style.paddingBottom || \"0\");\n\n        height =\n          rect.height -\n          paddingTop -\n          paddingBottom -\n          borderTopWidth -\n          borderBottomWidth;\n        width =\n          rect.width -\n          paddingLeft -\n          paddingRight -\n          borderLeftWidth -\n          borderRightWidth;\n        break;\n      }\n      case \"device-pixel-content-box\": {\n        height = parentNode.offsetHeight;\n        width = parentNode.offsetWidth;\n        break;\n      }\n    }\n\n    if (prevSize.height !== height || prevSize.width !== width) {\n      stableValuesRef.current.prevSize = { height, width };\n\n      onResize({\n        height,\n        width\n      });\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (rootElement === null) {\n      return;\n    }\n\n    const parentNode = rootElement.parentNode;\n    if (\n      parentNode === null ||\n      parentNode.ownerDocument === null ||\n      parentNode.ownerDocument.defaultView === null ||\n      !(parentNode instanceof parentNode.ownerDocument.defaultView.HTMLElement)\n    ) {\n      return;\n    }\n\n    stableValuesRef.current.parentNode = parentNode;\n\n    const onResizeStable = onResizeStableRef.current;\n\n    // Use ResizeObserver from the same context where parentNode (which we will observe) was defined\n    // Using just global can result into onResize events not being emitted in cases with multiple realms\n    const ResizeObserver = parentNode.ownerDocument.defaultView.ResizeObserver;\n    if (ResizeObserver != null) {\n      let timeoutId: NodeJS.Timeout;\n\n      const resizeObserver = new ResizeObserver(() => {\n        // Guard against \"ResizeObserver loop limit exceeded\" error;\n        // could be triggered if the state update causes the ResizeObserver handler to run long.\n        // See github.com/bvaughn/react-virtualized-auto-sizer/issues/55\n        timeoutId = setTimeout(onResizeStable, 0);\n      });\n\n      resizeObserver.observe(parentNode);\n\n      return () => {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n\n        resizeObserver.disconnect();\n      };\n    } else {\n      // Defer requiring resize handler in order to support server-side rendering.\n      // See github.com/bvaughn/react-virtualized-auto-sizer/issues/41\n      const detectElementResize = createDetectElementResize(nonce);\n      detectElementResize.addResizeListener(parentNode, onResizeStable);\n\n      return () => {\n        detectElementResize.removeResizeListener(parentNode, onResizeStable);\n      };\n    }\n  }, [nonce, rootElement]);\n}\n","import { createElement, memo, useMemo, useState } from \"react\";\nimport { useSize } from \"../hooks/useSize\";\nimport type { Size } from \"../types\";\nimport type { AutoSizerProps, ChildComponent, RenderProp } from \"./types\";\n\n/**\n * Measures the available width and height of its parent `HTMLElement` and passes those values as `width` and `height` props to its `children`.\n *\n * ℹ️ This component began as a fork of the [javascript-detect-element-resize](https://www.npmjs.com/package/javascript-detect-element-resize) package.\n */\nexport function AutoSizer({\n  box = \"content-box\",\n  className,\n  \"data-testid\": dataTestId,\n  id,\n  nonce,\n  onResize,\n  style,\n  tagName: TagName = \"div\",\n  ...props\n}: AutoSizerProps) {\n  let ChildComponent: ChildComponent | undefined = undefined;\n  let renderProp: RenderProp | undefined = undefined;\n  if (\"Child\" in props) {\n    ChildComponent = props.Child;\n  } else if (\"ChildComponent\" in props) {\n    ChildComponent = props.ChildComponent;\n  } else if (\"renderProp\" in props) {\n    renderProp = props.renderProp;\n  }\n\n  const [element, setElement] = useState<HTMLElement | null>(null);\n\n  const [height, setHeight] = useState<number | undefined>();\n  const [width, setWidth] = useState<number | undefined>();\n\n  useSize({\n    box,\n    nonce,\n    onResize: (nextSize: Size) => {\n      setHeight(nextSize.height);\n      setWidth(nextSize.width);\n\n      if (typeof onResize !== \"undefined\") {\n        onResize(nextSize);\n      }\n    },\n    rootElement: element\n  });\n\n  const MemoizedChildComponent = useMemo(\n    () => (ChildComponent ? memo(ChildComponent) : undefined),\n    [ChildComponent]\n  );\n\n  return createElement(\n    TagName,\n    {\n      className,\n      \"data-auto-sizer\": \"\",\n      \"data-testid\": dataTestId,\n      id,\n      ref: setElement,\n      style\n    },\n    MemoizedChildComponent\n      ? createElement(MemoizedChildComponent, { height, width })\n      : undefined,\n    renderProp ? renderProp({ height, width }) : undefined\n  );\n}\n"],"names":["windowObject","cancelFrame","requestFrame","TIMEOUT_DURATION","clearTimeoutFn","setTimeoutFn","cancelAnimationFrameFn","requestAnimationFrameFn","callback","animationFrameID","timeoutID","createDetectElementResize","nonce","animationKeyframes","animationName","animationStartEvent","animationStyle","checkTriggers","resetTriggers","scrollListener","attachEvent","element","triggers","expand","contract","expandChild","e","fn","animation","keyframeprefix","domPrefixes","startEvents","pfx","elm","createStyles","doc","css","head","style","elementStyle","expandTrigger","contractTrigger","useSize","box","onResize","rootElement","stableValuesRef","useRef","useLayoutEffect","onResizeStableRef","parentNode","prevSize","height","width","rect","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","onResizeStable","ResizeObserver","timeoutId","resizeObserver","detectElementResize","AutoSizer","className","dataTestId","id","TagName","props","ChildComponent","renderProp","setElement","useState","setHeight","setWidth","nextSize","MemoizedChildComponent","useMemo","memo","createElement"],"mappings":"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"}